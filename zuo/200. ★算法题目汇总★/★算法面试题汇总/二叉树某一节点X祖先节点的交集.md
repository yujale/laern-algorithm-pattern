# 二叉树某一节点X祖先节点的交集

---


某个节点X ,有一个先序遍历的顺序, X是二叉树中某一个节点, 我得到了整棵树的先序遍历, 我也知道这颗树的后序遍历, 则有结论:
X先序遍历之前的节点定义为集合A, X后序遍历之后的节点定义为集合B, 则 A∩B得到的解释是且仅是X的祖先节点

![[Pasted image 20201218004359.png]]

在先序遍历中X所有的祖先节点一定出现在先序遍历中X的左侧, 
在后序遍历中X所有的祖先节点一定不如X在后序遍历中出现的位置靠前, 

X 的祖先节点在这样的交集中, 一定有, 而且全

再证他们的交集中只有祖先节点, 其它节点不会出现

先看X 所有的孩子节点会不会在这样的集合里出现:
在先序遍历中X所有的孩子节点都在X先序遍历的右侧, 不会出现在A集合, 所以A∩B也没有

除了X 父亲节点 和 孩子节点外, X还有哪些节点呢?
可以分成两类:
1.X作为左树姿态的右兄弟们
2.X作为右树姿态的左兄弟们

![[Pasted image 20201218004230.png|400]]

所有的节点相对于X的关系,一共分为如下几类:  
1.X 的父亲节点  
2.X 自己  
3.X 的孩子节点  
4.X作为左树姿态的右兄弟们  
5.X作为右树姿态的左兄弟们  


证明 X作为左树姿态的右兄弟们 在不在A∩B集合?

先序遍历: 头 左 右
后序遍历:  左 右 头

如果X是左树姿态, 他所有的右兄弟们会出现在X后面, 不会出现在先序遍历中的A集合, 所以不会出现在A∩B
先序遍历中, 如果X是右树姿态, 他所有的左兄弟是在X之前, 但是后序遍历中, 所有X的左兄不会出现在X之后, 不在B集合里


综合以上: 只有X的祖先节点会出现在A∩B里








