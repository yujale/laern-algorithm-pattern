# AC自动机

#AC自动机

---

解决在一个大字符串中，找到多个候选字符串的问题

## AC自动机算法核心
1）把所有匹配串生成一棵前缀树

2）前缀树节点增加fail指针


2.1）关键在于fail指针的理解（网上帖子几乎没有解释）

fail指针含义：
如果必须以当前字符结尾，当前形成的路径是str，剩下哪一个字符串的前缀和str的后缀，拥有最大的匹配长度。fail指针就指向那个字符串的最后一个字符所对应的节点。

目前来到的节点，之前路径上的字符串记为str，除了str之外哪个前缀字符串，和str的后缀串匹配最大，fail指针就指向那个最大匹配串的最后字符底下的节点。（难理解吧？其实是精髓，看视频）

3）构建和使用看视频


### 总结
AC自动机建好以后, failed指针的含义也就相应的建好了
在匹配文章的时候, 如果你一直在成功, 你每到一个节点, 顺着
fail指针转一圈收集答案, 有黑的节点, 收集玩答案之后, 给它一个状态
下回再蹦就不要再蹦了
成功的时候, 我们的跳转看一遍是不该换门庭的, 你该在什么路径上还
在什么路径上, 只是转一圈而已, 每到一个节点都这么转一圈

但是失败的时候, 要顺着failed指针蹦到另外一条路径的节点上去



### AC自动机适用场景
要求必须一股脑把候选串给出, build完fail指针再用, 不接受动态的增加候选串
也不接受AC自动机删掉东西 
有可能能改进, 但它不是AC自动机原本的意思了

要想重新匹配大文章, 就得重新做新的AC自动机, 文章重新过

可以取代KMP, KMP是单串, AC自动机是多串